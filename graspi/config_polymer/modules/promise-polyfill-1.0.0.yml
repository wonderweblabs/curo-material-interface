webcomponent: true

dependencies:
  - polymer-1.0.8

tasks:
  graspi_build:
    - graspi_js_copy
    - graspi_js_concat
    - graspi_templates_copy
    - graspi_templates_concat
    - graspi_replace

options:
  basePath: 'bower_components/promise-polyfill'
  destFolder: 'promise-polyfill/webcomponents'
  js:
    destFile: 'promise-polyfill.js'
    files:
      - 'Promise.js'
  templates:
    destFile: 'promise-polyfill.html'
    files:
      - 'promise-polyfill-lite.html'
  replace:
    - files:
        - '%%destPath%%/promise-polyfill.html'
      pattern:
        pattern: '\<script src\=(?:QUOTES1|QUOTES2)\.\/Promise\.js(?:QUOTES1|QUOTES2)\>\<\/script\>'
        modifiers: 'g'
        quotesPlaceholder: 'QUOTES1'
        doubleQuotesPlaceholder: 'QUOTES2'
      replace:
        - '<style>'
        - file: '%%destPath%%/promise-polyfill.js'
        - '</style>'
    - files:
        - '%%destPath%%/promise-polyfill.html'
      pattern:
        pattern: '(?:\<link)(?:.*)(?:\>)'
        modifiers: 'g'
        quotesPlaceholder: 'QUOTES1'
        doubleQuotesPlaceholder: 'QUOTES2'
      replace: ''

  replace:
    - files:
        - '%%destPath%%/paper-checkbox.html'
      pattern:
        pattern: '(\<link rel\=\"import\" type\=\"css\" href\=\"paper\-checkbox.css\"\>)'
        modifiers: 'g'
        quotesPlaceholder: 'QUOTES1'
        doubleQuotesPlaceholder: 'QUOTES2'
      replace:
        - '<style>'
        - file: '%%destPath%%/paper-checkbox.css'
        - '</style>'
    - files:
        - '%%destPath%%/paper-checkbox.html'
      pattern:
        pattern: '(?:\<link)(?:.*)(?:\>)'
        modifiers: 'g'
        quotesPlaceholder: 'QUOTES1'
        doubleQuotesPlaceholder: 'QUOTES2'
      replace: ''


