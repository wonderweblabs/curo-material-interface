includeDependencies: true

dependencies: []

js:
  coffee:
    options:
      bare: true

live:
  watch:
    groups:
        sass:
          files:
            - lib/assets/cmi_doc/stylesheets/**/*.sass
          tasks:
            - graspi_build_sass
        coffee:
          files:
            - lib/assets/cmi_doc/javascripts/**/*.coffee
          tasks:
            - graspi_build_coffee
        images:
          files:
            - lib/assets/cmi_doc/images/**/*
          tasks:
            - graspi_build_images
        templates:
          files:
            - lib/assets/cmi_doc/templates/**/*
          tasks:
            - graspi_build_templates

tasks:
  graspi_build:
    - graspi_images
    - graspi_fonts
    - graspi_templates
    - graspi_css_sass_compile
    - graspi_css_concat
    - graspi_css_minify
    - graspi_js_coffee_compile
    - graspi_js_concat
    - graspi_js_uglify
    - graspi_filerev
    - graspi_manifest
    - graspi_css_replace_urls
  graspi_build_sass:
    - graspi_css_sass_compile
    - graspi_css_concat
    - graspi_filerev
    - graspi_manifest
    - graspi_css_replace_urls
  graspi_build_coffee:
    - graspi_js_coffee_compile
    - graspi_js_concat
    - graspi_filerev
    - graspi_manifest
    - graspi_css_replace_urls
  graspi_build_images:
    - graspi_images
    - graspi_css_concat
    - graspi_filerev
    - graspi_manifest
    - graspi_css_replace_urls
  graspi_build_fonts:
    - graspi_fonts
    - graspi_css_concat
    - graspi_filerev
    - graspi_manifest
    - graspi_css_replace_urls
  graspi_build_templates:
    - graspi_templates
    - graspi_filerev
    - graspi_manifest

options:
  destPath: 'gh-pages-middleman/source/gh-pages/assets'
  destFolder: 'cmi_doc_graspi'
  css:
    basePath: lib/assets/cmi_doc/stylesheets
    destFile: application.css
    files:
      - application.sass
  js:
    basePath: lib/assets/cmi_doc/javascripts
    destFile: application.js
    files:
      - '**/*.coffee'
  templates:
    basePath: lib/assets/cmi_doc/templates
    destFile: templates.html
    files:
      - '**/*.haml'
      - '**/*.html'
  images:
    basePath: lib/assets/cmi_doc/images
    files:
      - '{,*/}*'
  fonts:
    basePath: lib/assets/cmi_doc/fonts
    files:
      - '{,*/}*'

environments:
  development:
    tasks:
      graspi_build:
        - graspi_images
        - graspi_fonts
        - graspi_templates
        - graspi_css_sass_compile
        - graspi_css_concat
        - graspi_js_coffee_compile
        - graspi_js_concat
        - graspi_filerev
        - graspi_manifest
        - graspi_css_replace_urls
